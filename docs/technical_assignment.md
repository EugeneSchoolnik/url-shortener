# Технічне завдання: Бекенд сервісу скорочення посилань

### 1. Основні функції

- **Автентифікація та авторизація**: Реєстрація користувачів, вхід до системи, захист доступу до приватних посилань.
- **Прийом довгого URL**: Бекенд приймає запити на скорочення посилань.
- **Генерація/вказівка короткого ідентифікатора**:
  - Автоматична генерація унікального, короткого буквено-цифрового ідентифікатора.
  - Можливість для користувача вказати **власний короткий ідентифікатор** (кастомний "короткий код").
- **Збереження даних**: Зберігання відповідності **короткий ідентифікатор** <-> **довгий URL** <-> **ID користувача** у базі даних.
- **Перенаправлення**: При отриманні запиту на короткий URL, бекенд здійснює **HTTP 301/302 перенаправлення** на оригінальний довгий URL.
- **Валідація URL**: Перевірка формату вхідного URL.
- **Видалення короткого посилання**: Користувач може видалити створене ним коротке посилання.

---

### 2. Специфікація API (RESTful)

### 2.1. Реєстрація користувача

- **Метод**: `POST`
- **Шлях**: `/api/v1/auth/register`
- **Тіло запиту**:
  ```JSON
  {
    "email": "user@example.com",
    "password": "strongpassword123"
  }
  ```
- **Відповідь**: Токен доступу (наприклад, JWT) або повідомлення про успішну реєстрацію.

### 2.2. Авторизація користувача (вхід)

- **Метод**: `POST`
- **Шлях**: `/api/v1/auth/login`
- **Тіло запиту**:
  ```JSON
  {
    "email": "user@example.com",
    "password": "strongpassword123"
  }
  ```
- **Відповідь**: Токен доступу (наприклад, JWT).

### 2.3. Скорочення посилання

- **Метод**: `POST`
- **Шлях**: `/api/v1/shorten`
- **Заголовки**: `Authorization: Bearer <token>`
- **Тіло запиту**:
  ```JSON
  {
    "long_url": "https://example.com/very/long/url",
    "custom_code": "my-awesome-link"  // Опціонально. Якщо не вказано, генерується автоматично
  }
  ```
- **Відповідь (успіх)**:
  ```JSON
  {
    "short_url": "https://yourdomain.com/my-awesome-link"
  }
  ```
- **Відповідь (помилка)**: `HTTP 400 Bad Request` (невалідний URL, код зайнятий), `HTTP 401 Unauthorized`.

### 2.4. Перенаправлення

- **Метод**: `GET`
- **Шлях**: `/{short_id}` (наприклад, `/abcd123` або `/my-awesome-link`)
- **Дія**: Здійснює **HTTP 301 Moved Permanently** або **HTTP 302 Found** перенаправлення на оригінальний URL.
- **Відповідь (не знайдено)**: `HTTP 404 Not Found`.

### 2.5. Видалення короткого посилання

- **Метод**: `DELETE`
- **Шлях**: `/api/v1/links/{short_id}` (наприклад, `/api/v1/links/abcd123`)
- **Заголовки**: `Authorization: Bearer <token>`
- **Відповідь (успіх)**: `HTTP 204 No Content`.
- **Відповідь (помилка)**: `HTTP 401 Unauthorized`, `HTTP 403 Forbidden` (не власник посилання), `HTTP 404 Not Found`.

---

### 3. Технічні вимоги

- **Унікальність `short_id`**: Алгоритм генерації гарантує високу унікальність. При колізії — повторна спроба генерації.
- **Безпека**:
  - Хешування паролів.
  - Використання JWT або аналогічного механізму для токенів доступу.
  - Захист від SQL-ін'єкцій та XSS.
- **Обробка помилок**: Валідна обробка помилок та відповідні HTTP-статуси.
- **Масштабованість**: Архітектура, що дозволяє горизонтальне масштабування.
